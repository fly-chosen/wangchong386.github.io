---
layout: article
title:  "数据仓库之路(五)"
categories: DW
toc: true
image:
    teaser: /teaser/hive_sql1.png
---

> 本文主要介绍在w公司的数据仓库之数据监控


### 前言
&emsp;&emsp;主要想记录自己在w公司以来的经历和成长，挤出些时间对自己两年以来坐下总结，以便对下一步的道路进行更好的规划。
## 文章概述
数据仓库在各种原始业务数据的抽取，转换、中间处理，加载及对外接口推送过程中，需要设置对各个环节进行监控，获取其运行的情况，同时针对不同优先级的异常信息进行告警，及早发现，以此来保证线上的仓库正常运行。
### ETL处理过程中存在的问题
   
    * Shell脚本调用第三方接口如Hive时，错误信息不能直接捕获
   
    * 部分功能的运行错误需要解析日志才能捕获，如Sqlldr中reject的行数等
   
    * 调度工具Kettle不能捕获非sh自身的错误，造成后续作业继续运行
   
    * 仓库Hadoop处理增量合并时，增量是否合并成功，是否存在当天数据等
   
## 数据监控功能概述
结合目前仓库的情况，整理梳理后，截至目前大致监控的类型可分为如下几部分

（1）Hadoop文件的监控

 应用场景：主要监控HDFS上文件目录是否存在正确的分区，如大部分作业都会依赖的中间层订单表目录: /层1/层2/$table_name/dt=’$date’